<section ng-controller="MessagesController" ng-init="findInit()">
  <div class="container">
    <div class="row">

      <div class="col-xs-12"> 
        <div class="row create-new-message-block">
          <div class="col-xs-12">
            <h4 style="margin-top: 0;">
              Share Item
            </h4>
          </div>
          <hr>
          <div class="col-xs-12">
            <form name="messageForm" ng-submit="share(messageForm.$valid)" novalidate>
              <fieldset>
                <div class="flex-group">
                  <textarea id="content" name="content" class="content form-control" placeholder="Enter your new message here. Accepts styling!" rows="5" ng-model="content" content-styling></textarea>
                  <div class="c-group">
                    <button popover-template="imagePopover.templateUrl" popover-is-open="imagePopover.opened" popover-placement="left" type="button" class="btn ca btn-default" aria-label="Left Align">
                      <span class="glyphicon glyphicon-picture" aria-hidden="true"></span>
                    </button>
                    <button popover-template="stylePopover.templateUrl" popover-is-open="stylePopover.opened" popover-placement="left" type="button" class="btn cb btn-default" aria-label="Left Align">
                      <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                    </button>
                    <button type="submit" class="btn cc btn-default" aria-label="Left Align">
                      <span class="glyphicon glyphicon-send" aria-hidden="true"></span>
                    </button>
                  </div>
                </div>
              </fieldset>
            </form>
          </div>

          <div class="col-xs-12" style="margin-top: 10px">
            <h5>Attached Items: </h5>
            <ul class="list-group" style="margin-bottom: 0">
              <li class="list-group-item" ng-repeat="item in attachedItems">
                <img class="cart-thumbnail" src="{{item.itemImageURL}}" alt="{{item.name}}"/>
                <span ng-bind="item.name"></span>
              </li>
            </ul>
          </div>

          <div class="col-xs-12" style="margin-top: 10px">
            <li class="list-group-item">
              <div class="row">
                <div class="col-xs-6">
                  <select id="itemlist" name="itemlist" class="btn form-control btn-default dropdown-toggle btn-block" ng-options="option._id as option.name for option in items" ng-model="selectedItem" required>
                  </select>
                </div>

                <div class="col-xs-1 col-xs-offset-5" style="margin-top: 5px;" ng-click="attachItem()">
                  <button class="btn btn-default btn-xs">Add Item</button>
                </div>
              </div>
            </li>
          </div>

        </div>

      </div>

    </div>
  </div>

  <!-- Popover templates -->
  <script type="text/ng-template" id="imagePopoverTemplate.html">
      <div class="flex-group">
        <input type="text" ng-model="imagePopover.imageUrl" placeholder="Enter URL here." class="form-control" style="display: inline;">
        <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="addUrl();">
          Insert
        </button>
      </div>
  </script>

  <script type="text/ng-template" id="stylePopoverTemplate.html">
      <div class="flex-group">
        <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="addStyle('<b>');">
          <b>b</b>
        </button>
        <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="addStyle('<i>');">
          <i>i</i>
        </button>
        <button type="button" class="btn btn-default" aria-label="Left Align" ng-click="addStyle('<u>');">
          <u>u</u>
        </button>
      </div>
  </script>
  <!-- end -->
</section>